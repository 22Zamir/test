# Keitaro Campaign Manager

Django 5 приложение для управления кампаниями в рекламном трекере Keitaro.

## Возможности

1. **Создаватор кампаний** - автоматическое создание кампаний с двумя потоками:
   - Flow 1: Пользователи из указанной страны → редирект на Google
   - Flow 2: Остальные пользователи → редирект на выбранный оффер

2. **Редактор кампаний** - управление офферами в существующих кампаниях:
   - Добавление офферов с указанием веса
   - Удаление офферов из кампании
   - Просмотр статистики по офферам

## Установка

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd keitaro-campaign-manager
```

2. Создайте виртуальное окружение:
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# или
venv\Scripts\activate  # Windows
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Создайте файл `.env` на основе `.env.example`:
```bash
cp .env.example .env
```

5. Заполните настройки в `.env`:
```
SECRET_KEY=your-secret-key-here
KEITARO_API_URL=https://your-keitaro-instance.com
KEITARO_API_KEY=your-api-key-here

# Опциональные настройки (можно оставить пустыми)
KEITARO_DOMAIN=
KEITARO_GROUP=
KEITARO_SOURCE=
```

**Примечание:** Поля `KEITARO_DOMAIN`, `KEITARO_GROUP` и `KEITARO_SOURCE` опциональны. 
Если они не указаны в `.env`, вы сможете указать их при создании кампании через веб-интерфейс.

6. Выполните миграции:
```bash
python manage.py migrate
```

7. Создайте суперпользователя (опционально):
```bash
python manage.py createsuperuser
```

8. Запустите сервер разработки:
```bash
python manage.py runserver
```

## Использование

### Создание кампании

1. Перейдите на страницу "Создать кампанию"
2. Заполните форму:
   - **Название кампании**: любое имя для идентификации
   - **Geo**: код страны (например, AU, MX, RO)
   - **Offer ID**: ID оффера из Keitaro
3. Нажмите "Создать"

Система автоматически создаст:
- Кампанию в Keitaro с указанными настройками
- Два потока (flows) согласно требованиям
- Записи в локальной базе данных

### Редактирование кампании

1. Откройте кампанию из списка
2. Нажмите "Редактировать"
3. Используйте форму слева для добавления новых офферов
4. Используйте кнопку "Удалить" для удаления офферов из таблицы

## Структура проекта

```
keitaro-campaign-manager/
├── campaigns/          # Основное приложение
│   ├── models.py       # Модели данных
│   ├── views.py        # Представления
│   ├── forms.py        # Формы
│   ├── services.py     # Бизнес-логика
│   ├── keitaro_api.py  # Клиент Keitaro API
│   └── urls.py         # URL маршруты
├── keitaro_tracker/    # Настройки проекта
├── templates/          # HTML шаблоны
├── static/             # Статические файлы
└── manage.py          # Django управляющий скрипт
```

## API Keitaro

Приложение использует Keitaro Admin API для:
- Создания и обновления кампаний
- Управления потоками (streams)
- Добавления/удаления офферов в потоки

Документация API доступна в админке Keitaro в разделе "Профиль" → "API ключи" → "Документация".

## Технологии

- Django 5.0.1
- Python 3.8+
- Bootstrap 5.3
- Requests для работы с API

## Лицензия

Проект создан в рамках тестового задания.

